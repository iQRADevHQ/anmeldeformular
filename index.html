<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>IQRA Akademie - Anmeldung zum Quran-Unterricht</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/intl-tel-input/17.0.8/css/intlTelInput.css">
    <style>
        :root {
            --primary-color: #2C3E50;
            --accent-color: #27AE60;
            --background-color: #ECF0F1;
            --text-color: #2C3E50;
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            background-color: var(--background-color);
            color: var(--text-color);
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            text-align: center;
            padding: 40px 0;
            background-color: var(--primary-color);
            color: white;
            margin-bottom: 30px;
        }

        .header h1 {
            margin-bottom: 10px;
            font-size: 2.5em;
        }

        .header p {
            font-size: 1.2em;
            opacity: 0.9;
        }

        .form-container {
            background-color: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        .form-group {
            margin-bottom: 20px;
        }

        label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: var(--primary-color);
        }

        input[type="text"],
        input[type="email"],
        input[type="tel"],
        select {
            width: 100%;
            padding: 12px;
            border: 2px solid #DDD;
            border-radius: 6px;
            font-size: 16px;
            transition: border-color 0.3s ease;
        }

        input:focus,
        select:focus {
            outline: none;
            border-color: var(--accent-color);
        }

        .terms-container {
            height: 200px;
            overflow-y: scroll;
            border: 2px solid #DDD;
            padding: 15px;
            margin-bottom: 15px;
            border-radius: 6px;
            background-color: #F8F9FA;
        }

        .checkbox-group {
            display: flex;
            align-items: center;
            margin-top: 10px;
        }

        .checkbox-group input[type="checkbox"] {
            margin-right: 10px;
            width: 18px;
            height: 18px;
        }

        button {
            background-color: var(--accent-color);
            color: white;
            padding: 15px 30px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 18px;
            font-weight: 600;
            width: 100%;
            transition: background-color 0.3s ease;
        }

        button:hover {
            background-color: #219a52;
        }

        .success-message {
            display: none;
            background-color: #D4EDDA;
            color: #155724;
            padding: 15px;
            border-radius: 6px;
            margin-bottom: 20px;
            text-align: center;
        }

        .error-message {
            display: none;
            background-color: #F8D7DA;
            color: #721C24;
            padding: 15px;
            border-radius: 6px;
            margin-bottom: 20px;
            text-align: center;
        }

        @media (max-width: 768px) {
            .container {
                padding: 10px;
            }

            .header {
                padding: 20px 0;
            }

            .header h1 {
                font-size: 2em;
            }

            .form-container {
                padding: 20px;
            }
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>IQRA Akademie</h1>
        <p>Anmeldung zum Quran-Unterricht</p>
    </div>

    <div class="container">
        <div id="successMessage" class="success-message">
            Ihre Anmeldung wurde erfolgreich übermittelt! Sie erhalten in Kürze eine Bestätigungs-E-Mail.
        </div>
        
        <div id="errorMessage" class="error-message">
            Es ist ein Fehler aufgetreten. Bitte versuchen Sie es später erneut.
        </div>

        <div class="form-container">
            <form id="registrationForm" onsubmit="return validateForm(event)">
                <div class="form-group">
                    <label for="vorname">Vorname*</label>
                    <input type="text" id="vorname" name="vorname" required>
                </div>
                
                <div class="form-group">
                    <label for="nachname">Nachname*</label>
                    <input type="text" id="nachname" name="nachname" required>
                </div>
                
                <div class="form-group">
                    <label for="strasse">Straße und Hausnummer*</label>
                    <input type="text" id="strasse" name="strasse" required>
                </div>
                
                <div class="form-group">
                    <label for="plz">PLZ*</label>
                    <input type="text" id="plz" name="plz" required>
                </div>
                
                <div class="form-group">
                    <label for="ort">Ort*</label>
                    <input type="text" id="ort" name="ort" required>
                </div>
                
                <div class="form-group">
                    <label for="land">Land*</label>
                    <select id="land" name="land" required>
                        <option value="">Bitte wählen</option>
                        <option value="DE">Deutschland</option>
                        <option value="AT">Österreich</option>
                        <option value="CH">Schweiz</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="phone">Telefonnummer*</label>
                    <input type="tel" id="phone" name="phone" required>
                </div>
                
                <div class="form-group">
                    <label for="email">E-Mail*</label>
                    <input type="email" id="email" name="email" required>
                </div>
                
                <div class="form-group">
                    <label>Allgemeine Geschäftsbedingungen*</label>
                    <div class="terms-container">
                        <!-- Hier AGBs aus dem PDF einfügen -->
                        <h2>Allgemeine Geschäftsbedingungen (AGB)</h2>
    <p><strong>Stand:</strong> 20.09.2024</p>
    
    <h3>1. Registrierung</h3>
    <p><strong>1.1</strong> Zur Registrierung benötigen wir Ihren vollständigen Namen, Ihre Adresse sowie Ihre Handynummer und E-Mail-Adresse. Rechnungen werden ausschließlich per E-Mail versendet. Wir versenden keine Rechnungen per Briefpost.</p>
    <p><strong>1.2</strong> Nach Ihrer Anmeldung erhalten Sie unmittelbar die Zugangsdaten zum Unterrichtsraum, sodass Sie ab dem von Ihnen gewünschten Termin direkt mit dem Unterricht beginnen können.</p>
    <p><strong>1.3</strong> Die Rechnungsstellung erfolgt monatlich und umfasst alle im jeweiligen Kalendermonat angefallenen Unterrichtseinheiten. Bei der ersten Rechnung nach der Neuregistrierung wird zusätzlich eine Anmeldegebühr in Höhe von 20 Euro berechnet. Um einen fortlaufenden Unterricht zu gewährleisten, muss die Rechnung innerhalb von 7 Tagen nach Erhalt bezahlt werden.</p>
    
    <h3>2. Teilnahme und Abwesenheit</h3>
    <p><strong>2.1</strong> Im Falle Ihrer Abwesenheit von einer Unterrichtsstunde, aus welchem Grund auch immer, wird die Stunde dennoch berechnet, da die Zeit für Sie reserviert ist.</p>
    <p><strong>2.2</strong> Wir bieten die Möglichkeit, die Lehrkraft im Voraus über unseren Telegram-Kommunikationsbot um eine Terminverschiebung zu bitten.</p>
    <p><strong>2.3</strong> Die Lehrkraft ist jedoch nicht verpflichtet, einer Terminverschiebung zuzustimmen, und es ist oftmals aufgrund des engen Zeitplans nicht möglich, einen alternativen Termin anzubieten.</p>
    <p><strong>2.4</strong> Wenn eine Terminverschiebung erforderlich ist, muss sichergestellt werden, dass ein Ersatztermin innerhalb von 7 Tagen gefunden wird, andernfalls werden die Unterrichtsstunden automatisch als erhalten betrachtet und in Rechnung gestellt.</p>
    <p><strong>2.5</strong> Kurz gesagt: Sollte die Lehrkraft keinen alternativen Termin innerhalb von 7 Tagen anbieten können oder wollen, wird der Unterricht als erhalten betrachtet und in Rechnung gestellt.</p>
    
    <h3>3. Pausieren des Unterrichts</h3>
    <p><strong>3.1 Urlaub:</strong> Informieren Sie den Kundenservice (nicht nur die Lehrkraft) spätestens drei Tage vor dem geplanten Urlaub, damit die Stunden ohne zusätzliche Kosten pausiert werden können.</p>
    <p><strong>3.2 Krankheit:</strong> Falls Sie oder Ihre Kinder krank sind und eine längere Krankheitsdauer absehbar ist, können Sie die Stunden ebenfalls pausieren. Informieren Sie den Kundenservice (nicht nur die Lehrkraft) bitte rechtzeitig, damit die Stunden ab dem dritten Tag nach Bekanntgabe der Krankheit pausiert werden können.</p>
    
    <h3>4. Prüfungen und Materialien</h3>
    <p><strong>4.1</strong> Prüfungen, Unterrichtsmaterial und Unterrichtsaufzeichnungen dürfen nicht verbreitet oder mit Dritten geteilt werden.</p>
    <p><strong>4.2 Prüfungen beim Arabischunterricht:</strong></p>
    <p><strong>4.2.1</strong> Sobald man mit dem Unterrichtsstoff einer Stufe fertig ist, erhält man die Möglichkeit, sich eine Woche lang auf die Prüfung vorzubereiten.</p>
    <p><strong>4.2.2</strong> Der normale Unterricht fällt am Prüfungstag aus, wird jedoch als eine Unterrichtsstunde berechnet, da die Prüfung vorbereitet und korrigiert werden muss.</p>
    
    <h3>5. Kündigungsverfahren</h3>
    <p><strong>5.1</strong> Um den Erhalt weiterer Unterrichtseinheiten einzustellen, ist es erforderlich, eine schriftliche Mitteilung an den Kundenservice vorzunehmen. Diese kann per E-Mail oder WhatsApp erfolgen.</p>
    <p><strong>5.2</strong> Lehrkräfte sind nicht für Kündigungen oder finanzielle Angelegenheiten zuständig. Anfragen oder Kündigungen sollten nicht über den Telegram-Kommunikationsbot, sondern ausschließlich über die offiziellen Kommunikationskanäle mit dem Kundenservice oder der Buchhaltung erfolgen.</p>
    <p><strong>5.3</strong> Bis zum Eingang einer schriftlichen Kündigung per E-Mail oder WhatsApp beim Kundenservice, werden alle vereinbarten Unterrichtseinheiten in Rechnung gestellt, unabhängig von der Teilnahme des Kunden. Die Kündigung tritt 7 Tage nach Eingang beim Kundenservice in Kraft.</p>
    <p><strong>5.4</strong> Fragen zu Rechnungen oder andere Anliegen sollten ebenfalls über die offiziellen Kommunikationskanäle mit dem Kundenservice oder der Buchhaltung geklärt werden.</p>
    
    <h3>6. Kommunikation</h3>
    <p>Bitte tauschen Sie keine privaten Kontaktdaten mit der Lehrkraft aus. Alle unterrichtsbezogenen Angelegenheiten können über den Telegram-Kommunikationsbot geklärt werden.</p>
    
    <h3>7. Zustimmung</h3>
    <p>Durch die Anmeldung bestätigen Sie automatisch, dass Sie mit unseren Bedingungen einverstanden sind und sich daran halten. Die Annahme dieser Bedingungen erfolgt durch die Registrierung.</p>
    <p>Diese Bestimmungen sind eine <strong>Amaanah</strong> vor Allah. Zuwiderhandlungen können wir leider nicht verzeihen und werden diese Amaanah am Tag der Auferstehung einfordern.</p>
                        <!-- Weitere AGBs hier einfügen -->
                    </div>
                    <div class="checkbox-group">
                        <input type="checkbox" id="agb" name="agb" required>
                        <label for="agb">Ich habe die AGBs gelesen und akzeptiere sie</label>
                    </div>
                </div>
                
                <div class="form-group">
                    <label>Häufig gestellte Fragen (FAQ)*</label>
                    <div class="terms-container">
                        <!-- Hier FAQ einfügen -->
                        <h3>Häufig gestellte Fragen (FAQ)</h3>
                        <p>1. Wie läuft der Unterricht ab?</p>
                        <p>2. Was sind die Zahlungsbedingungen?</p>
                        <p>3. Wie kann ich eine Unterrichtsstunde verschieben?</p>
                        <!-- Weitere FAQs hier einfügen -->
                    </div>
                    <div class="checkbox-group">
                        <input type="checkbox" id="faq" name="faq" required>
                        <label for="faq">Ich habe die FAQ gelesen und verstanden</label>
                    </div>
                </div>
                
                <button type="submit">Anmeldung absenden</button>
            </form>
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/intl-tel-input/17.0.8/js/intlTelInput.min.js"></script>
    <script>
        // Telefonnummer-Input initialisieren
        var phoneInput = window.intlTelInput(document.querySelector("#phone"), {
            preferredCountries: ["de", "at", "ch"],
            utilsScript: "https://cdnjs.cloudflare.com/ajax/libs/intl-tel-input/17.0.8/js/utils.js",
        });

        function validateForm(event) {
            event.preventDefault();
            
            // Formularvalidierung
            if (!phoneInput.isValidNumber()) {
                showError("Bitte geben Sie eine gültige Telefonnummer ein.");
                return false;
            }

            // Formulardaten sammeln
            const formData = new FormData(event.target);
            const data = Object.fromEntries(formData.entries());
            data.phone = phoneInput.getNumber();

            // API-Aufruf
            submitForm(data);
        }

        function showSuccess() {
            const successMessage = document.getElementById('successMessage');
            successMessage.style.display = 'block';
            document.getElementById('registrationForm').reset();
            setTimeout(() => {
                successMessage.style.display = 'none';
            }, 5000);
        }

        function showError(message) {
            const errorMessage = document.getElementById('errorMessage');
            errorMessage.textContent = message;
            errorMessage.style.display = 'block';
            setTimeout(() => {
                errorMessage.style.display = 'none';
            }, 5000);
        }

        async function submitForm(data) {
            try {
                const response = await fetch('/api/register', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify(data)
                });

                if (response.ok) {
                    showSuccess();
                } else {
                    showError("Es ist ein Fehler aufgetreten. Bitte versuchen Sie es später erneut.");
                }
            } catch (error) {
                console.error('Error:', error);
                showError("Es ist ein Fehler aufgetreten. Bitte versuchen Sie es später erneut.");
            }
        }
    </script>
</body>
</html>